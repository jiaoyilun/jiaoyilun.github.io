---
layout: default
---
<script type="text/javascript" src="{{"/static/js/jquery.autocomplete.min.js" | prepend:site.baseurl}}"></script>
<script type="text/javascript">
$(function() {	
        var key = getKeyWord();
        if(key.length>0){
        	$("#key").val(key);
        	getData(key);
        }
});

function getData(key){
	$.ajax({
	            url: "atom.xml",
	            dataType: "xml",
	            success: function( xmlResponse ) {
	                var posts = $( "post", xmlResponse ).map(function() {
	                    return {
	                        title: $( "title", this ).text() + ", " +
	                            ( $.trim( $( "updated", this ).text() ) ),
	                        //desc: $("summary", this).text(),
	                        content: $("content",this).text(),
	                        url: $("url", this).text()
	                    };
	                }).get();             
		for (var i = posts.length - 1; i >= 0; i--) {
			if(posts[i].title.indexOf(key)>0 ||posts[i].content.indexOf(key)>0	){
				$("#results").append(posts[i].title+"<br>");
			}
		};
	            }
	        });
}

function getKeyWord(){
      var href = window.location.href;
      var pos = href.indexOf('?query=');
      var paraStr = href.substring(pos + 7);
      return decodeURI(paraStr);
}

function go(){
	var url = '{{site.utl}}/search.html?query='+$("#key").val();
	window.location.href = url;
}
</script>
       
<div class="col-lg-8">
    <div class="input-group">
      <input type="text" id="key" class="form-control input-lg" placeholder="可搜索标题，正文">
      <span class="input-group-btn">
        <button class="btn btn-success btn-lg" type="button" onclick="go()">搜!</button>
      </span>
    </div><!-- /input-group -->
  </div>
